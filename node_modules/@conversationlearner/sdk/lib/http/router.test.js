"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
/**
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
const supertest = require("supertest");
const express = require("express");
const router_1 = require("./router");
const CLClient_1 = require("../CLClient");
describe('Test SDK router', () => {
    const options = {
        CONVERSATION_LEARNER_SERVICE_URI: 'https://jsonplaceholder.typicode.com',
        APIM_SUBSCRIPTION_KEY: undefined,
        LUIS_AUTHORING_KEY: undefined
    };
    const clClient = new CLClient_1.CLClient(options);
    const sdkRouter = router_1.default(clClient, options);
    const app = express();
    app.use(sdkRouter);
    let server = null;
    beforeAll(() => {
        server = supertest(app);
    });
    it('given request to known (sdk) route should return 200', () => tslib_1.__awaiter(this, void 0, void 0, function* () {
        const response = yield server.get('/');
        expect(response.status).toBe(200);
    }));
    it('given request to unknown route should be forwarded to proxy address', () => tslib_1.__awaiter(this, void 0, void 0, function* () {
        const response = yield server.get('/posts/1');
        expect(response.status).toBe(200);
        expect(response.body.userId).toBe(1);
    }));
});
//# sourceMappingURL=router.test.js.map